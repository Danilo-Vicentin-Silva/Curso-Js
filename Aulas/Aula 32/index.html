<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XMLHttpRequest</title>
    <style>
        span#ajaxButton {
            text-decoration: underline;

            cursor: pointer;
        }
    </style>
</head>

<body>

    <span id="ajaxButton">
        Make a request
    </span>

    <script type="text/javascript">
        //XMLHttp bÃ¡sico
        /*
        const request = new XMLHttpRequest()

        try {
            request.open('GET', 'products.json')
            request.responseType = 'json'

            request.addEventListener('load', () => initialize(request.response))
            request.addEventListener('error', () => console.log('XHR error'))

            request.send()
        } 
        catch(error) {
            console.log(`XHR error ${request.status}`)
        }
        */

        var httpRequest
        document.querySelector("span#ajaxButton").onclick = function (params) {
            makeRequest("test.xml")
        }

        function makeRequest(url) {
            if (window.XMLHttpRequest) { //Mozilla, Safari...
                httpRequest = new XMLHttpRequest()
            } else if (window.ActiveXObject) { //IE
                try {
                    httpRequest = new ActiveXObject("Msxml2.XMLHTPP")
                } catch (e) {
                    try {
                        httpRequest = new ActiveXObject("Microsoft.XMLHTTP")
                    } catch (e) {}
                }
            }

            if (!httpRequest) {
                alert('Giving up :( Cannot create an XMLHTTP instance')
                return false
            }

            httpRequest.onreadystatechange = alertContents
            httpRequest.open('GET', url)
            httpRequest.send()
        }

        function alertContents(params) {
            if (httpRequest.readyState === 4) {
                if (httpRequest.status === 200) {
                    var xmldoc = httpRequest.responseXML
                    var root_node = xmldoc.getElementByTagName('root').iten(0)
                    alert(root_node.firstChild.data)
                } else {
                    alert('There was a problem with the request')
                }
            }
        }

    </script>
</body>

</html>